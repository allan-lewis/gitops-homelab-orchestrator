services:
  jellyfin:
    image: "jellyfin/jellyfin:2025112405"
    container_name: jellyfin
    user: "{{ compose_env.JELLYFIN_USER_UID }}:{{ compose_env.JELLYFIN_GROUP_GID }}"
    network_mode: "host"
    volumes:
      - /srv/jellyfin/config:/config
      - /srv/jellyfin/cache:/cache
      - /mnt/media-library:/media-library:ro
    restart: unless-stopped
    environment:
      - JELLYFIN_PublishedServerUrl={{ compose_env.JELLYFIN_PUBLISHED_URL }}
    extra_hosts:
      - "host.docker.internal:host-gateway"
